<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * PayLater extension for Magento
 *
 * Long description of this file (if any...)
 *
 * NOTICE OF LICENSE
 *
 * [TO BE DEFINED]
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade
 * the Wonga PayLater module to newer versions in the future.
 * If you wish to customize the PayLater module for your needs
 * please refer to http://www.magentocommerce.com for more information.
 *
 * @category   PayLater
 * @package    PayLater_PayLater
 * @copyright  Copyright (C) 2012 PayLater
 * @license    [TO BE DEFINED]
 */
-->
<config>
	<modules>
		<PayLater_PayLater>
			<version>1.0.0</version>
		</PayLater_PayLater>
	</modules>
	<paylater>
		<license>
			<url>http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)</url>
		</license>
		<support>
			<email>dev@gpmd.co.uk</email>
		</support>
		<report>
			<bugs>dev@gpmd.co.uk</bugs>
		</report>
		<dev>
			<email>dev@gpmd.co.uk</email>
		</dev>
	</paylater>
	<global>
		<helpers>
			<paylater>
				<class>PayLater_PayLater_Helper</class>
			</paylater>
		</helpers>
		<models>
			<paylater>
				<class>PayLater_PayLater_Model</class>
			</paylater>
		</models>
		<blocks>
			<paylater>
				<class>PayLater_PayLater_Block</class>
			</paylater>
		</blocks>
		<sales>
			<totals>
				<grand_total>
                       <renderer>paylater/checkout_grandtotal</renderer>
					   <!--
                       <admin_renderer>adminhtml/sales_order_create_totals_grandtotal</admin_renderer>
					   -->
                </grand_total>
			</totals>
		</sales>
	</global>
	<frontend>
		<routers>
			<paylater>
				<use>standard</use>
				<args>
					<module>PayLater_PayLater</module>
					<frontName>paylater</frontName>
				</args>
			</paylater>
		</routers>
		<events>
			<controller_action_layout_render_before_catalog_product_view>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>catalogProductViewBefore</method>
					</paylater_observer>
				</observers>
			</controller_action_layout_render_before_catalog_product_view>
			<controller_action_layout_render_before_checkout_onepage_index>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>checkoutOnepageIndexBefore</method>
					</paylater_observer>
				</observers>
			</controller_action_layout_render_before_checkout_onepage_index>
			<controller_action_layout_render_before_paylater_checkout_payment>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>checkoutOnepageIndexBefore</method>
					</paylater_observer>
				</observers>
			</controller_action_layout_render_before_paylater_checkout_payment>
			<!--
			@deprecated
			<core_block_abstract_to_html_before>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>coreBlockToHtmlBefore</method>
					</paylater_observer>
				</observers>
			</core_block_abstract_to_html_before>
			@deprecated
			<core_block_abstract_to_html_after>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>coreBlockToHtmlAfter</method>
					</paylater_observer>
				</observers>
			</core_block_abstract_to_html_after>
			-->
		</events>
		<layout>
			<updates>
				<paylater>
					<file>paylater/paylater.xml</file>
				</paylater>
			</updates>
		</layout>
	</frontend>
	<admin>
        <routers>
            <paylater>
                <use>admin</use>
                <args>
                    <module>PayLater_PayLater</module>
                    <frontName>paylater</frontName>
                </args>
            </paylater>
        </routers>
    </admin>
	<adminhtml>
		<acl>
			<resources>
				<all>
					<title>Allow Everything</title>
				</all>
				<admin>
					<children>
						<system>
							<children>
								<config>
									<children>
										<paylater>
											<title>PayLater</title>
											<sort_order>100</sort_order>
										</paylater>
									</children>
								</config>
							</children>
						</system>
					</children>
				</admin>
			</resources>
		</acl>
		<layout>
			<updates>
				<paylater>
					<file>paylater/paylater.xml</file>
				</paylater>
			</updates>
		</layout>
	</adminhtml>
	<default>
		<payment>
			<paylater>
				<active>1</active>
            	
            	<model>paylater/payment_gateway</model>
			</paylater>
		</payment>
		<paylater>
			<globals>
				<run_status>0</run_status>
				<env>test</env>
			</globals>
			<dev>
				<log_file>paylater_paylater.log</log_file>
			</dev>
			<payment>
				<order_status>pending</order_status>
				<service_unavailable_heading><![CDATA[PayLater is temporarely unavailable]]></service_unavailable_heading>
				<service_unavailable_body><![CDATA[We are currently unable to connect to PayLater service. Please choose another payment method, or try again later.<br />We apologise for any inconvenience caused.]]></service_unavailable_body>
			</payment>
			<review><customer_note><![CDATA[<strong>Please Note:</strong> You will be redirected to PayLater site to complete your order.]]></customer_note></review>
		</paylater>
	</default>
</config>