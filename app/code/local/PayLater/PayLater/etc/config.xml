<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * PayLater extension for Magento
 *
 * Long description of this file (if any...)
 *
 * NOTICE OF LICENSE
 *
 * [TO BE DEFINED]
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade
 * the PayLater module to newer versions in the future.
 * If you wish to customize the PayLater module for your needs
 * please refer to http://www.magentocommerce.com for more information.
 *
 * @category   PayLater
 * @package    PayLater_PayLater
 * @copyright  Copyright (C) 2012 PayLater
 * @license    [TO BE DEFINED]
 */
-->
<config>
	<modules>
		<PayLater_PayLater>
			<version>1.0.0</version>
		</PayLater_PayLater>
	</modules>
	<paylater>
		<license>
			<url>http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)</url>
		</license>
		<support>
			<email>dev@gpmd.co.uk</email>
		</support>
		<report>
			<bugs>dev@gpmd.co.uk</bugs>
		</report>
		<dev>
			<email>dev@gpmd.co.uk</email>
		</dev>
	</paylater>
	<global>
		<helpers>
			<paylater>
				<class>PayLater_PayLater_Helper</class>
			</paylater>
		</helpers>
		<models>
			<paylater>
				<class>PayLater_PayLater_Model</class>
				 <resourceModel>paylater_resource</resourceModel>
			</paylater>
			<paylater_resource>
				<class>PayLater_PayLater_Model_Resource</class>
				<entities>
					<refund>
						<table>paylater_refund</table>
					</refund>
				</entities>
			</paylater_resource>
		</models>
		<blocks>
			<paylater>
				<class>PayLater_PayLater_Block</class>
			</paylater>
		</blocks>
		<sales>
			<totals>
				<grand_total>
                       <renderer>paylater/checkout_grandtotal</renderer>
					   <!--
                       <admin_renderer>adminhtml/sales_order_create_totals_grandtotal</admin_renderer>
					   -->
                </grand_total>
			</totals>
		</sales>
		<resources>
            <paylater_write>
                <connection>
                    <use>core_setup</use>
                </connection>
            </paylater_write>
            <paylater_read>
                <connection>
                    <use>core_setup</use>
                </connection>
            </paylater_read>
            <paylater_setup>
                <setup>
                    <module>PayLater_PayLater</module>
                    <class>PayLater_PayLater_Model_Resource_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </paylater_setup>
		</resources>
	</global>
	<frontend>
		<routers>
			<paylater>
				<use>standard</use>
				<args>
					<module>PayLater_PayLater</module>
					<frontName>paylater</frontName>
				</args>
			</paylater>
			<!-- @deprecated
			<checkout>
                <use>standard</use>
                <args>
                    <modules>
                        <PayLater_PayLater before="Mage_Checkout">PayLater_PayLater</PayLater_PayLater>
                    </modules>
                </args>
            </checkout>
			-->
		</routers>
		<events>
			<controller_action_layout_render_before_catalog_product_view>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>catalogProductViewBefore</method>
					</paylater_observer>
				</observers>
			</controller_action_layout_render_before_catalog_product_view>
			<controller_action_layout_render_before_checkout_onepage_index>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>checkoutOnepageIndexBefore</method>
					</paylater_observer>
				</observers>
			</controller_action_layout_render_before_checkout_onepage_index>
			<controller_action_layout_render_before_checkout_onepage_return>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>checkoutOnepageReturnBefore</method>
					</paylater_observer>
				</observers>
			</controller_action_layout_render_before_checkout_onepage_return>
			<checkout_type_onepage_save_order_after>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>saveOrderAfter</method>
					</paylater_observer>
				</observers>
			</checkout_type_onepage_save_order_after>
			<!--
			@deprecated
			<core_block_abstract_to_html_before>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>coreBlockToHtmlBefore</method>
					</paylater_observer>
				</observers>
			</core_block_abstract_to_html_before>
			@deprecated
			<core_block_abstract_to_html_after>
				<observers>
					<paylater_observer>
						<class>paylater/event_observer</class>
						<method>coreBlockToHtmlAfter</method>
					</paylater_observer>
				</observers>
			</core_block_abstract_to_html_after>
			-->
		</events>
		<layout>
			<updates>
				<paylater>
					<file>paylater/paylater.xml</file>
				</paylater>
			</updates>
		</layout>
	</frontend>
	<admin>
        <routers>
            <paylater>
                <use>admin</use>
                <args>
                    <module>PayLater_PayLater</module>
                    <frontName>paylater</frontName>
                </args>
            </paylater>
			<adminhtml>
                <use>admin</use>
                <args>
                    <modules>
                        <PayLater_PayLater_Adminhtml before="Mage_Adminhtml">PayLater_PayLater_Adminhtml</PayLater_PayLater_Adminhtml>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
	<adminhtml>
		<acl>
			<resources>
				<all>
					<title>Allow Everything</title>
				</all>
				<admin>
					<children>
						<system>
							<children>
								<config>
									<children>
										<paylater>
											<title>PayLater</title>
											<sort_order>100</sort_order>
										</paylater>
									</children>
								</config>
							</children>
						</system>
					</children>
				</admin>
			</resources>
		</acl>
		<layout>
			<updates>
				<paylater>
					<file>paylater/paylater.xml</file>
				</paylater>
			</updates>
		</layout>
	</adminhtml>
	<default>
		<payment>
			<paylater>
				<active>1</active>
            	
            	<model>paylater/payment_gateway</model>
			</paylater>
		</payment>
		<paylater>
			<globals>
				<run_status>0</run_status>
				<env>test</env>
			</globals>
			<dev>
				<log_file>paylater_paylater.log</log_file>
			</dev>
			<product>
				<event>mouseover</event>
			</product>
			<payment>
				<order_status>pending</order_status>
				<service_unavailable_heading><![CDATA[PayLater is temporarely unavailable]]></service_unavailable_heading>
				<service_unavailable_body><![CDATA[We are currently unable to connect to PayLater. Please choose an alternative payment method, or try again later.]]></service_unavailable_body>
				<out_range_heading><![CDATA[PayLater payment option is currently unavailable]]></out_range_heading>
				<out_range_message><![CDATA[PayLater is only avaiable for orders between %s and %s. Currently your basket total is %s]]></out_range_message>
				<error_code_body><![CDATA[Unfortunately, your PayLater application canâ€™t be completed at this time. Please checkout, using an alternative payment method. We apologise for any inconvenience caused.]]></error_code_body>
			</payment>
			<review><customer_note><![CDATA[By choosing PayLater, you will be redirected to the PayLater website to complete your order.]]></customer_note></review>
		</paylater>
	</default>
</config>